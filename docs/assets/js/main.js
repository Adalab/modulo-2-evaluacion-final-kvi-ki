"use strict";const searchField=document.querySelector(".js-search"),searchButton=document.querySelector(".js-button"),resultsList=document.querySelector(".js-result");let moviesList=[];function getResult(){fetch("http://api.tvmaze.com/search/shows?q="+searchField.value).then(e=>e.json()).then(e=>{moviesList=e,paintMovies()})}const ul=document.createElement("ul");function paintMovies(){if(""===searchField.value)alert("Por favor, escribe el nombre de la pelicula/serie en el campo de la busqueda");else for(let e=0;e<moviesList.length;e++){null===moviesList[e].show.image?moviesList[e].show.image="https://via.placeholder.com/210x295/ffffff/666666/?text=TV":moviesList[e].show.image=moviesList[e].show.image.medium;const t=document.createElement("li");t.innerHTML=`<img src="${moviesList[e].show.image}"/> ${moviesList[e].show.name}`,ul.appendChild(t),resultsList.appendChild(ul),t.classList.add("js-searchlist"),t.addEventListener("click",()=>paintFavourites(moviesList[e].show))}}searchButton.addEventListener("click",getResult);const favouriteList=document.querySelector(".js-favourites"),newUl=document.createElement("ul"),newUlTitle=document.createTextNode("Mis Series Favoritas:");newUl.appendChild(newUlTitle);let favs=[];const favsData=localStorage.getItem("favs");function addFavourite(e){const t=document.createElement("li");t.innerHTML=`<img src="${e.image}"/> ${e.name}<i class="fas fa-times icon" id="${e.id}"></i>`,newUl.appendChild(t),t.classList.add("js-favourite"),favouriteList.appendChild(newUl)}function paintFavourites(e){addFavourite(e),favs.push(e),localStorage.setItem("favs",JSON.stringify(favs))}null!==favsData&&(favs=JSON.parse(favsData));for(let e=0;e<favs.length;e++){addFavourite(favs[e]);document.getElementById(""+favs[e].id).addEventListener("click",()=>removeFavourite(e))}function removeFavourite(e){favs.splice(e,1);console.log(favs),localStorage.setItem("favs",JSON.stringify(favs));const t=localStorage.getItem("favs");null!==t&&(favs=JSON.parse(t))}